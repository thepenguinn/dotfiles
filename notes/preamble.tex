% height = 5.9in width = 4.37in
% make this variable
%% \usepackage[paperheight = 4.37in, paperwidth = 5.9in, margin=0.2in]{geometry}
\usepackage[a4paper, margin=1in]{geometry}

\usepackage[export]{adjustbox}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{circuitikz}
\usepackage{subfiles}
\usepackage{amsmath, amssymb}
\usepackage{enumitem}
\usepackage{nicematrix}
\usepackage{minted}
\usepackage{caption}
\usepackage{lmodern}
\usepackage{bookmark}
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{multicol}
\usepackage{booktabs}
\usepackage{titlesec}
\usepackage{xspace}
\usepackage{varwidth}
\usepackage{titletoc}
\usepackage{epigraph}
\usepackage{etoolbox}

\usepackage[bottom]{footmisc}

\usepackage{gensymb}
\usepackage{siunitx}
\usepackage{pgfplots}

\pgfplotsset{
    compat=newest,
    colormap={black}{rgb255=(0,0,0) rgb255=(0,0,0)}
}

\usetikzlibrary{intersections}
\usetikzlibrary{positioning}
\usetikzlibrary{calc}
\usetikzlibrary{ext.topaths.arcthrough}

\setlength{\arraycolsep}{0pt}
\renewcommand\arraystretch{2}

%% custom packages

\usepackage{colorscheme}
\usepackage{subtikzpicture}

%% \makeatletter
%% \def\maxwidth{\ifdim\Gin@nat@width>0.8\linewidth0.8\linewidth\else\Gin@nat@width\fi}
%% \def\maxheight{\ifdim\Gin@nat@height>0.9\textheight0.9\textheight\else\Gin@nat@height\fi}
%% \makeatother
%% % Scale images if necessary, so that they will not overflow the page
%% % margins by default, and it is still possible to overwrite the defaults
%% % using explicit options in \includegraphics[width, height, ...]{}
%% \setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
%% % Set default figure placement to htbp

\renewcommand{\epigraphflush}{center}

\setlength\epigraphwidth{9cm}
\setlength\epigraphrule{0pt}

\titleformat{\chapter} [display]
{\bfseries\normalfont\huge\filright\sffamily\vspace{-2cm}}
{\Large\textsc{chapter \num[minimum-integer-digits = 2]{\thechapter}} \vspace{1em}}
{1pc}
{\titlerule\vspace{0.5em}\scshape}
[\vspace{0.5em}{\titlerule[1pt]}]

%\titleformat{\section} [display]
%{\bfseries\normalfont\large\filright\sffamily}
%{}
%{2pt}
%{\scshape}
%{}

%% for graphicx
%% https://tex.stackexchange.com/questions/439918/set-default-value-for-max-width-of-includegraphics

\expandafter\patchcmd\csname Gin@ii\endcsname
{\setkeys {Gin}{#1}}
{%
    \setkeys {Gin}
    {max width = 0.7\textwidth, max height = 0.4\textwidth, keepaspectratio, #1}%
}
{}{}

\makeatletter
\def\fps@figure{htbp}
\makeatother
